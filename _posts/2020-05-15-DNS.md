---
title: "LINUX: DNS"
last_modified_at: 2020-05-15T20:20:02-05:00
categories:
  - LINUX
tags:
  - DNS
  - 서버구현
  - LINUX
toc: true 
toc_label: "Table of Contents"
toc_icon: "cog"
toc_sticky: true 
author_profile: true 
read_time: false 
---
---
### 네임 서버의 개요
---
* NS(Name Server) 또는 DNS(Domain Name Service)라고 한다.
* 프로토콜://도메인네임
	* https://authentic75.github.io/
{: .notice}
* URL: 도메인은 논리적인 주소 값이라서 정하기 나름. 도메인 네임만으로는 위치를 알 수 없다.
* IP주소는 물리적 제한을 가지고 있다. 정해진 지역에 따른 IP 주소를 사용해야만한다.
* 주소라고 하는 것은 크게 3가지로 볼 수 있겠다
	* MAC 주소 (2계층)/ IP 주소 (3계층)/ Domain 주소
{: .notice}
```console
# DNS 서버의 주소를 저장
# 도메인 네임을 IP로 변환해주는 revolver 가 저장됨
[root@ns1 ~]# cat /etc/resolv.conf
nameserver 168.126.63.1
nameserver 168.126.63.2
```
---
### DNS 탄생 배경
---
/etc/hosts 파일에 IP 주소와 대상의 이름이 적혀있다.  
옛날의 전화번호부로 비유 할 수 있겠다.  
{: .notice}
```console
[root@ns1 ~]# cat /etc/hosts
# Do not remove the following line, or various programs
# that require network functionality will fail.
127.0.0.1       localhost.localdomain localhost
::1             localhost6.localdomain6 localhost6
192.168.0.114   ns1.kjy.co.ki
```
* 옛날에는 개인 수첩에 전화번호를 일일이 적던 시절이 있었다고한다. 나중에 가서는 전화국에서 전화번호부를 배포하고 관리하기 시작했다.
* 컴퓨터에서는 **internic 이라는 기관에서 hosts 파일을 만들어 배포하면서 도메인을 관리했다.**
* 그런데 하나의 hosts 파일로 만들어 배포하면 2억 비트 가까이된다. 그리고 내용이 하루하루 달라진다. ISP만 바꿔도 IP는 바뀐다.
* 그래서 주기적으로 internic 사이트에 들어가서 host 파일을 갱신해준다(직접 다운받는다) 결국 hosts의 파일 크기가 커진다.
* 요즘에 우리는 전화버호부 대신 114를 사용한다. 이것이 DNS의 역할이다. 이름해석을 전문적으로 해주는 서버 컴퓨터다.
* 윈도우에도 그 흔적이 아직 남아있다. C:\Windows\System32\drivers\etc\hosts 파일을 보자
{: .notice}
```console
C:\Windows\System32\drivers\etc\hosts
# For example:
#      102.54.94.97     rhino.acme.com          # source server
#       38.25.63.10     x.acme.com              # x client host

# localhost name resolution is handled within DNS itself.
#	127.0.0.1       localhost
#	::1             localhost
```
---
### 파밍과 피싱
---
* 파밍 : 위조된 사이트에 들어가는 것 사용자는 인지를 못함
* 피싱 : (스미싱과 비슷) 보호해주겠다는 메시지를 보고 내 정보를 보낸다
{: .notice}
* 설정을 잘하면 속도가 빨라지고 잘못 설정하면 느려 진다.
* 8.8.8.8 구글에서 사용하는 웹 서버 번호
* 잘못 수정했다고 가정하자. /etc/hosts 에 8.8.8.8을 추가하고 도메인 네임을 엉뚱하게 적어보자.
* Ping 8.8.8.8 을 하면 엉뚱한 도메인 네임으로 뜬다.
{: .notice}
* 공격방법
	* query x-> DNS Server  가로챈다
	* <-Response Attacker  128.100.5.10  악의적으로 다른 주소를 줌
	* http -> 128.100.5.10 사용자는 무의식적으로 오염된 사이트를 접속
	* 마음에 안드는 사람의 컴퓨터에 들어가서 hosts 파일을 수정하면 쉬운 방법의 공격
{: .notice}












